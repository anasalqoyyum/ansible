- name: Check for gh CLI
  ansible.builtin.command: gh --version
  register: gh_check
  ignore_errors: true
  tags:
    - gh-dash

- name: Ensure gh-dash extension is installed (if gh exists)
  ansible.builtin.command: gh extension install dlvhdr/gh-dash
  args:
    creates: "{{ lookup('env', 'HOME') }}/.local/share/gh/extensions/gh-dash"
  when: gh_check.rc == 0
  tags:
    - gh-dash
